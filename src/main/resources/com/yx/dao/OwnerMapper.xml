<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yx.dao.OwnerMapper">

        <!-- 通用查询映射结果 -->
        <resultMap id="BaseResultMap" type="com.yx.pojo.Owner">
                    <id column="id" property="id"/>
                    <result column="username" property="username"/>
                    <result column="tel" property="tel"/>
                    <result column="sex" property="sex"/>
                    <result column="identity" property="identity"/>
                    <result column="house_id" property="houseId"/>
                    <result column="remarks" property="remarks"/>
                    <result column="password" property="password"/>
        </resultMap>

        <!-- 通用查询结果列 -->
        <sql id="Base_Column_List">
            id, username, tel, sex, identity, house_id, remarks, password
        </sql>
    
    <resultMap id="queryOwnerAllMap" type="com.yx.pojo.Owner" extends="BaseResultMap">
        <association property="house" javaType="com.yx.pojo.House">
            <id column="id" property="id"></id>
            <result property="numbers" column="numbers"></result>
        </association>
    </resultMap>

    <select id="queryOwnerAll" parameterType="com.yx.pojo.Owner" resultMap="queryOwnerAllMap">
        SELECT owner.*,house.numbers
        FROM owner
        LEFT JOIN house
        ON owner.house_id=house.id
        <where>
            <if test="tel!=null and tel!=''">
                and tel like '%${tel}%'
            </if>
        </where>
        <where>
            <if test="identity!=null and identity!=''">
                and identity like '%${identity}%'
            </if>
        </where>
        order by owner.id desc
    </select>
</mapper>